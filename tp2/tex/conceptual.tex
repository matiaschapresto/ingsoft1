\subsection{Modelo Conceptual}
\subsubsection{Diagrama de clases}
\diagramav{Modelo-Conceptual}
\subsubsection{Aclaraciones}
\begin{itemize}
	\item La herencia es siempre disjunta y completa.
	\item La clase \texttt{Persona} fue agregada con el objetivo de unificar los atributos de diferentes subclases de \texttt{Persona}.
	\item \textbf{Notar que las herencias pueden ser varios conectivos de herencia. ie. Ver clase Persona, de la cual heredan Empleado y Pasajero.}
\end{itemize}
\subsubsection{Restricciones al modelo con OCL}
\begin{enumerate}
	\item \begin{ocl}{Puntaje del taxista entre 0 y 10.}
		  context Taxista
		  inv: self.puntajePromedio >=0 and
		       self.puntajePromedio <=10
		\end{ocl}
	
	\item \begin{ocl}{Puntaje del viaje entre 0 y 10.}
		  context Viaje
		  inv: self.puntaje >=0 and
		       self.puntaje <=10
		\end{ocl}

	\item \begin{ocl}{No puede haber 2 viajes con el mismo taxista en el mismo momento.}
		  context Viaje
		  inv: self.allInstances() -> not(exists(v1, v2 | v1.fechaComienzo == v2.fechaComienzo 
		                                            and v1.Taxista == v2.Taxista))
		\end{ocl}
		\textbf{Hay que poner que no se intersecten las ventanas del viaje (fechafinal y fechacomienzo)}

	\item \begin{ocl}{Si una Reserva tiene un viaje, el pasajero creador de la reserva debe ser el pasajero del viaje asociado a la reserva.}
		  context Reserva
		  inv: self.ViajeAsociado.Pasajero == self.creador
		\end{ocl}

	\item \begin{ocl}{Si una Reserva es en el futuro, el viaje asociado debe estar en estado pendiente.}
		  context Reserva
		  inv: 
		\end{ocl}

	\item \begin{ocl}{El domicilio de origen y destino de un viaje debe ser distinto.}
		  context Viaje
		  inv: not(self.DomicilioOrigen == self.DomicilioDestino)
		\end{ocl}

	\item \begin{ocl}{La fecha comienzo de un viaje debe ser menor que la fecha fin.}
		  context Viaje
		  inv: self.FechaComienzo < self.FechaFinal
		\end{ocl}

	\item \begin{ocl}{No hay usuarios repetidos por clave \texttt{nombre de usuario}.}
		  context Persona
		  inv: self.AllInstances() -> not(exist(p1, p2 | p1.NombreUsuario == p2.NombreUsuario))
		\end{ocl}	

	\item \begin{ocl}{Los viajes que tiene una clase Facturacion, corresponden a ese dia(fecha facturacion, con fechafin viaje(pensar que se paga al finalizar viaje)).}
		  context 
		  inv: 
		\end{ocl}

	\item \begin{ocl}{El montofacturado de una clase Facturacion corresponde a la suma de todos los viajes que tiene la clase.}
		  context 
		  inv: 
		\end{ocl}
		\textbf{Hay que hacerlo con las funciones matematicas de ocl}

	\item \begin{ocl}{Los viajes tienen una clase facturacion asociada, debe corresponder la fecha(fecha fin del viaje con fecha del dia de facturacion, los viajes que empiezan 23.59 de un dia y terminan al dia siguiente no son problema porque asumimos que matchean fecha facturacion, con fechafin viaje(pensar que se paga al finalizar viaje)).}
		  context 
		  inv: 
		\end{ocl}

	\item \begin{ocl}{Ojo que aca(a diferencia de facturacion) tomamos como match la fecha inicio de un viaje con la fecha del historial de viajes(un dia tiene un viaje si comenzo en ese dia, sin importar cuando termine, makes sense, no?). Hay que oclear que matcheen las fechas de inicio de los viajes que tiene historial con la fecha del historial.}
		  context 
		  inv: 
		\end{ocl}

	\item \begin{ocl}{La fecha del historial de viajes que tiene un viaje, debe coincidir con la fecha de inicio del viaje.}
		  context 
		  inv: 
		\end{ocl}

	\item \begin{ocl}{La calificacion asociada a un taxista, debe contener el puntaje promedio que corresponde al promedio de puntaje de los viajes de dicho taxista.}
		  context 
		  inv: 
		\end{ocl}
		\textbf{Hay que hacerlo con las funciones matematicas de ocl}

\end{enumerate}
